<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Segment tree | RaikoX</title><meta name="renderer" content="webkit"><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="description" content="作一场冒险的表演 &lt;br/&gt; 走过千秋万岁寂寞的云烟"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Segment tree | RaikoX"><meta name="twitter:description" content="作一场冒险的表演 &lt;br/&gt; 走过千秋万岁寂寞的云烟"><meta property="og:type" content="article"><meta property="og:title" content="Segment tree | RaikoX"><meta property="og:description" content="作一场冒险的表演 &lt;br/&gt; 走过千秋万岁寂寞的云烟"><meta name="author" content="RaikoLee"><link rel="stylesheet" href="/css/search.css"><link rel="stylesheet" href="/css/vno.css"><link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css"><link rel="icon" href="/images/2333.jpg"><meta name="generator" content="hexo"><link rel="alternate" type="application/rss+xml" title="RaikoX" href="/atom.xml"><link rel="canonical" href="http://raikoblog.tk/2017/04/04/segmenttree/"><script src="/js/instantclick.min.js" data-no-instant></script><script data-no-instant>InstantClick.on("change",function(t){!1===t&&("undefined"!=typeof MathJax&&MathJax.Hub.Queue(["Typeset",MathJax.Hub]),"undefined"!=typeof prettyPrint&&prettyPrint(),"undefined"!=typeof _hmt&&_hmt.push(["_trackPageview",location.pathname+location.search]),"undefined"!=typeof ga&&ga("send","pageview",location.pathname+location.search))}),InstantClick.init()</script></head><body class="home-template no-js"><script src="//cdn.bootcss.com/jquery/2.1.4/jquery.min.js"></script><script src="/js/main.js"></script><span class="mobile btn-mobile-menu"><i class="fa fa-list btn-mobile-menu__icon"></i><i class="fa fa-angle-up btn-mobile-close__icon hidden"></i></span><header class="panel-cover panel-cover--collapsed" style="background-image:url(/images/background-cover.jpg)"><div class="panel-main"><div class="panel-main__inner panel-inverted"><div class="panel-main__content"> <a href="/" title="前往 RaikoX 的主页"><img src="/images/2333.jpg" width="80" alt="RaikoX logo" class="panel-cover__logo logo"></a><h1 class="panel-cover__title panel-title"><a href="/" title="link to homepage for RaikoX">RaikoX</a></h1> <span class="panel-cover__subtitle panel-subtitle">心里的伤 无法分享</span><hr class="panel-cover__divider"><p class="panel-cover__description">作一场冒险的表演<br> 走过千秋万岁寂寞的云烟</p><hr class="panel-cover__divider panel-cover__divider--secondary"><div class="navigation-wrapper"><div><nav class="cover-navigation cover-navigation--primary"><ul class="navigation"><li class="navigation__item"><a href="/#blog" title="访问博客" class="blog-button">博客</a></li><li class="navigation__item"><a href="/aboutme">关于我</a></li></ul></nav></div><div><nav class="cover-navigation navigation--social"><ul class="navigation"><li class="navigation__item"><a href="/atom.xml" title="RSS" target="_blank"><i class="social fa fa-rss"></i> <span class="label">RSS</span></a></li><li class="navigation__item"><a href="#" title="搜索"><i class="social fa fa-search search-form-link"></i> <span class="label">搜索</span></a></li><div class="ins-search"><div class="ins-search-mask"></div><div class="ins-search-container"><div class="ins-input-wrapper"> <input type="text" class="ins-search-input" placeholder="搜索 ..."><span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span></div><div class="ins-section-wrapper"><div class="ins-section-container"></div></div></div></div><script>!function(T){var N={TRANSLATION:{POSTS:"文章",PAGES:"页面",CATEGORIES:"分类",TAGS:"标签",UNTITLED:"无标题"},ROOT_URL:"/",CONTENT_URL:"/content.json"};T.INSIGHT_CONFIG=N}(window)</script><script src="/js/insight.js"></script></ul></nav></div></div></div></div><div class="panel-cover--overlay cover-purple"></div></div></header><div class="content-wrapper"><div class="content-wrapper__inner"><article class="post-container post-container--single"><header class="post-header"><div class="post-meta"> <time datetime="2017-04-03T16:48:21.000Z" class="post-list__meta--date date">2017-04-04</time> &#8226; <span class="post-meta__tags tags">于&nbsp; <a class="tag-link" href="/tags/oi/">oi</a>, <a class="tag-link" href="/tags/数据结构/">数据结构</a></span> <span class="page-pv">&nbsp;阅读&nbsp;<span id="busuanzi_value_page_pv"><i class="fa fa-spinner fa-spin"></i></span></span></div><h1 class="post-title">Segment tree</h1></header><section class="post"><p>Segment tree from codeforces<br><a id="more"></a></p><h3 id="Segment-tree-with-single-element-modifications"><a href="#Segment-tree-with-single-element-modifications" class="headerlink" title="Segment tree with single element modifications"></a>Segment tree with single element modifications</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> n = <span class="number">1e5</span>;</div><div class="line"><span class="keyword">int</span> n;</div><div class="line"><span class="keyword">int</span> t[<span class="number">2</span>*n];  </div><div class="line">  </div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">()</span></span>&#123;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=n<span class="number">-1</span>;i&gt;<span class="number">0</span>;--i) t[i] = t[i&lt;&lt;<span class="number">1</span>] + t[i&lt;&lt;<span class="number">1</span>|<span class="number">1</span>];</div><div class="line">&#125;  </div><div class="line">  </div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">modify</span><span class="params">(<span class="keyword">int</span> p , <span class="keyword">int</span> value)</span></span>&#123;</div><div class="line">    <span class="keyword">for</span> (t[p += n] = value;p&gt;<span class="number">1</span>;P &gt;&gt;=<span class="number">1</span>) t[p&gt;&gt;<span class="number">1</span>]=t[p]+t[p^<span class="number">1</span>];</div><div class="line">&#125;  </div><div class="line">  </div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> l. <span class="keyword">int</span> r)</span></span>&#123;</div><div class="line">    <span class="keyword">int</span> res=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> (l+=n,r+=n;l&lt;r;l&gt;&gt;=<span class="number">1</span>,r&gt;&gt;=<span class="number">1</span>)&#123;</div><div class="line">        <span class="keyword">if</span> (l&amp;<span class="number">1</span>) res += t[l++];</div><div class="line">        <span class="keyword">if</span> (r&amp;l) res += t[--r];</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> res;</div><div class="line">&#125;  </div><div class="line">  </div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="built_in">scanf</span> (<span class="string">"%d"</span>, &amp;n);</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;++i) <span class="built_in">scanf</span> (<span class="string">"%d"</span>,t+n+i);</div><div class="line">    build();</div><div class="line">    modify(<span class="number">0</span>,<span class="number">1</span>);</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,query(<span class="number">3</span>,<span class="number">11</span>));</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></section></article><section class="read-more"><div class="read-more-item"> <span class="read-more-item-dim">更早的文章</span><h2 class="post-list__post-title post-title"><a href="/2017/03/30/oisong/" title="膜你抄">膜你抄</a></h2><p class="excerpt"> 一首歌</p><div class="post-list__meta"><time datetime="2017-03-30T14:35:24.000Z" class="post-list__meta--date date">2017-03-30</time> &#8226; <span class="post-list__meta--tags tags">于&nbsp; <a class="tag-link" href="/tags/oi/">oi</a></span> <a class="btn-border-small" href="/2017/03/30/oisong/">继续阅读</a></div></div></section><footer class="footer"> <span class="footer__copyright">本站点采用 <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a></span> <span class="footer__copyright">基于 <a href="http://hexo.io">Hexo</a> 搭建，感谢 <a href="https://pages.github.com/">GitHub Pages</a> 提供免费的托管服务</span> <span class="footer__copyright">&copy; 2017 - 本站由 <a href="/">@Raiko</a> 创建, 使用 <a href="https://github.com/monniya/hexo-theme-new-vno">hexo-theme-new-vno</a> 主题, 修改自 <a href="https://github.com/lenbo-ma/hexo-theme-vno" target="_blank">Vno</a>, 原创出自<a href="http://github.com/onevcat/vno" target="_blank">onevcat</a></span><div class="jiathis_style"> <span class="jiathis_txt">分享到：</span><a class="jiathis_button_tools_1"></a><a class="jiathis_button_tools_2"></a><a class="jiathis_button_tools_3"></a><a class="jiathis_button_tools_4"></a> <a href="http://www.jiathis.com/share?uid=2129776" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank">更多</a><a class="jiathis_counter_style"></a></div><script type="text/javascript">var jiathis_config={data_track_clickback:"true"}</script><script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=2129776" charset="utf-8"></script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script></footer></div></div><script>!function(e,a,t,n,c,o,s){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,o=a.createElement(t),s=a.getElementsByTagName(t)[0],o.async=1,o.src="//www.google-analytics.com/analytics.js",s.parentNode.insertBefore(o,s)}(window,document,"script",0,"ga"),ga("create","UA-78918255-1","auto"),ga("send","pageview")</script><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="//hm.baidu.com/hm.js?9cdad07c755fa23f6aced510c6760e87";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script></body></html>